diff --git a/Home/ayanavita-fontend-final/src/components/booking/BookingForm.tsx b/Home/ayanavita-fontend-final/src/components/booking/BookingForm.tsx
index 91f40f8351ae2e4fe35079fac795846bf500b765..3068c9dd4aeb9df0e31f47ed82c0f296001fe81e 100644
--- a/Home/ayanavita-fontend-final/src/components/booking/BookingForm.tsx
+++ b/Home/ayanavita-fontend-final/src/components/booking/BookingForm.tsx
@@ -1,104 +1,100 @@
 // src/components/booking/BookingForm.tsx
 import React, { useEffect, useMemo, useState } from "react";
 import type { DemoBranch, DemoService } from "../../services/booking.demo";
 import type { Booking } from "../../services/booking.storage";
 import { uid, money, isValidPhone, toISODate } from "../../services/booking.utils";

 export type BookingDraft = {
   name: string;
   phone: string;
   email: string;
   date: string;
   note: string;
 };

 export function BookingForm({
   services,
   branches,
   selectedServiceId,
   selectedBranchId,
   selectedSlot,
-  customTime,
-  onCustomTime,
   onToast,
   onCreate,
   onResetSignal,
   initialName,
   onServiceChange,
   onBranchChange,
   onDateChange,
 }: {
   services: DemoService[];
   branches: DemoBranch[];
   selectedServiceId: string;
   selectedBranchId: string;
   selectedSlot: string | null;
-  customTime: string;
-  onCustomTime: (value: string) => void;
   onToast: (t: string, d?: string) => void;
   onCreate: (b: Booking) => void;
   onResetSignal: number;
   initialName?: string;
   onServiceChange: (serviceId: string) => void;
   onBranchChange: (branchId: string) => void;
   onDateChange: (date: string) => void;
 }) {
   const tomorrow = useMemo(() => toISODate(new Date(Date.now() + 86400000)), []);
   const [draft, setDraft] = useState<BookingDraft>(() => ({
     name: initialName || "",
     phone: "",
     email: "",
     date: tomorrow,
     note: "",
   }));

   useEffect(() => {
     if (initialName) setDraft((d) => ({ ...d, name: initialName }));
   }, [initialName]);

   useEffect(() => {
     setDraft({
       name: initialName || "",
       phone: "",
       email: "",
       date: tomorrow,
       note: "",
     });
     onDateChange(tomorrow);
   }, [onResetSignal, initialName, onDateChange, tomorrow]);

   const svc = useMemo(() => services.find((s) => s.id === selectedServiceId), [services, selectedServiceId]);
   const branchPick = useMemo(() => branches.find((b) => b.id === selectedBranchId), [branches, selectedBranchId]);

   const update = <K extends keyof BookingDraft>(k: K, v: BookingDraft[K]) => setDraft((d) => ({ ...d, [k]: v }));

   const create = () => {
     const name = draft.name.trim();
     const phone = draft.phone.trim();
     const date = draft.date;
-    const pickedTime = customTime || selectedSlot;
+    const pickedTime = selectedSlot;

     if (!name) return onToast("Thiếu thông tin", "Vui lòng nhập họ và tên.");
     if (!isValidPhone(phone)) return onToast("Số điện thoại chưa đúng", "Vui lòng nhập số bắt đầu bằng 0 và đủ 10–11 số.");
     if (!date) return onToast("Thiếu ngày", "Vui lòng chọn ngày.");
     if (!svc) return onToast("Thiếu dịch vụ", "Vui lòng chọn dịch vụ trước.");
     if (!branchPick) return onToast("Thiếu chi nhánh", "Vui lòng chọn chi nhánh.");
     if (!pickedTime) return onToast("Chưa chọn giờ", "Vui lòng chọn khung giờ hoặc nhập giờ tùy chọn.");

     const booking: Booking = {
       id: uid("BK"),
       createdAt: new Date().toISOString(),
       name,
       phone,
       email: draft.email.trim(),
       notify: "email",
       serviceId: svc.id,
       serviceName: svc.name,
       duration: svc.duration,
       price: svc.price,
       staffId: null,
       staffName: "Hệ thống phân bổ",
       branchId: branchPick.id,
       branchName: branchPick.name,
       date,
       time: pickedTime,
@@ -160,61 +156,51 @@ export function BookingForm({
             value={selectedBranchId}
             disabled={!selectedServiceId || !branches.length}
             onChange={(e) => onBranchChange(e.target.value)}
           >
             {branches.map((b) => (
               <option key={b.id} value={b.id}>
                 {b.name}
               </option>
             ))}
           </select>
         </div>

         <div>
           <label className="text-sm font-extrabold text-slate-700">Ngày *</label>
           <input
             type="date"
             className="mt-2 w-full rounded-2xl border border-slate-200 px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100"
             value={draft.date}
             onChange={(e) => {
               update("date", e.target.value);
               onDateChange(e.target.value);
             }}
           />
         </div>

-        <div>
-          <label className="text-sm font-extrabold text-slate-700">Giờ tự chọn (tuỳ chọn)</label>
-          <input
-            type="time"
-            className="mt-2 w-full rounded-2xl border border-slate-200 px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100"
-            value={customTime}
-            onChange={(e) => onCustomTime(e.target.value)}
-          />
-        </div>
-
         <div className="md:col-span-2">
           <label className="text-sm font-extrabold text-slate-700">Ghi chú</label>
           <textarea rows={3} className="mt-2 w-full rounded-2xl border border-slate-200 px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100" placeholder="Tình trạng da, nhu cầu…" value={draft.note} onChange={(e) => update("note", e.target.value)} />
         </div>
       </div>

       <div className="mt-4 rounded-3xl bg-slate-50 p-4 ring-1 ring-slate-200">
         <div className="text-sm text-slate-700">
-          Khung giờ đã chọn: <b>{customTime || selectedSlot || "Chưa chọn"}</b>
+          Khung giờ đã chọn: <b>{selectedSlot || "Chưa chọn"}</b>
           <span className="text-slate-500"> • Dự kiến: </span>
           <b>{svc ? `${svc.duration} phút` : "—"}</b>
         </div>

         <div className="mt-3 flex gap-2">
           <button type="button" className="rounded-2xl bg-gradient-to-br from-indigo-600 to-violet-600 px-4 py-3 text-sm font-extrabold text-white ring-1 ring-indigo-200 hover:opacity-95" onClick={create}>
             ➕ Tạo lịch hẹn
           </button>
         </div>

         <div className="mt-2 text-sm text-slate-600">
           Giá tham khảo: <b>{svc ? money(svc.price) : "—"}</b> <span className="text-slate-500">• Có thể thay đổi theo tình trạng/ liệu trình.</span>
         </div>
       </div>
     </div>
   );
 }
diff --git a/Home/ayanavita-fontend-final/src/components/booking/SlotPicker.tsx b/Home/ayanavita-fontend-final/src/components/booking/SlotPicker.tsx
index b3d45c3f4b14f339674121215a5f19d54cba56a6..6506b708252061302f446bcfa2771fa9d0a1d586 100644
--- a/Home/ayanavita-fontend-final/src/components/booking/SlotPicker.tsx
+++ b/Home/ayanavita-fontend-final/src/components/booking/SlotPicker.tsx
@@ -1,61 +1,76 @@
 // src/components/booking/SlotPicker.tsx
 import React from "react";
 import type { Slot } from "../../services/useBookingSlots";

 export function SlotPicker({
   slots,
   selected,
+  customTime,
   onPick,
+  onCustomTime,
   onRefresh,
   loading,
   durationMin,
   capacity,
 }: {
   slots: Slot[];
   selected: string | null;
+  customTime: string;
   onPick: (t: string) => void;
+  onCustomTime: (value: string) => void;
   onRefresh: () => void;
   loading?: boolean;
   durationMin?: number;
   capacity?: number;
 }) {
   return (
     <aside className="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
       <div className="flex items-start justify-between">
         <div>
           <div className="text-xs font-extrabold text-slate-500">Khung giờ gợi ý</div>
           <div className="text-xl font-extrabold">Chọn giờ phù hợp</div>
           <div className="mt-1 text-xs text-slate-500">{durationMin ? `Mỗi slot ${durationMin} phút` : "Chọn chi nhánh + dịch vụ + ngày"}{capacity ? ` • Năng lực: ${capacity} slot đồng thời` : ""}</div>
         </div>
         <button className="rounded-2xl bg-gradient-to-br from-amber-400 to-yellow-300 px-4 py-2 text-sm font-extrabold text-slate-900 ring-1 ring-amber-200 hover:opacity-95" onClick={onRefresh} type="button">
           ↻ Làm mới
         </button>
       </div>

       {loading ? <div className="mt-4 text-sm text-slate-500">Đang tải khung giờ...</div> : null}

       <div className="mt-4 grid grid-cols-3 gap-2">
         {slots.map((s) => {
           const disabled = !s.available;
           const active = selected === s.t;
           return (
             <button
               key={s.t}
               type="button"
               disabled={disabled}
               onClick={() => onPick(s.t)}
               className={[
                 "aspect-square rounded-2xl p-2 text-center ring-1 ring-slate-200",
                 disabled ? "cursor-not-allowed bg-slate-100 opacity-60" : "bg-white hover:bg-slate-50",
                 active ? "ring-2 ring-indigo-500" : "",
               ].join(" ")}
             >
               <div className="text-sm font-extrabold">{s.t}</div>
               <div className="mt-1 text-[11px] text-slate-500">{disabled ? "Hết chỗ" : "Còn chỗ"}</div>
             </button>
           );
         })}
       </div>
+
+      <div className={["mt-4 rounded-2xl border p-3", customTime ? "border-indigo-500 ring-2 ring-indigo-100" : "border-slate-200"].join(" ")}>
+        <div className="text-sm font-extrabold text-slate-700">Giờ tuỳ chọn</div>
+        <input
+          type="time"
+          className="mt-2 w-full rounded-xl border border-slate-200 px-3 py-2 outline-none focus:ring-4 focus:ring-indigo-100"
+          value={customTime}
+          onChange={(e) => onCustomTime(e.target.value)}
+        />
+        <div className="mt-1 text-xs text-slate-500">Khi dùng giờ tuỳ chọn, ô này sẽ được active thay cho khung giờ gợi ý.</div>
+      </div>
     </aside>
   );
 }
diff --git a/Home/ayanavita-fontend-final/src/components/booking/ToastStack.tsx b/Home/ayanavita-fontend-final/src/components/booking/ToastStack.tsx
index 55b29045f3df275c663c69716b709362b63e6aba..24fc114c004bd44b05de2323fb3165503e8de891 100644
--- a/Home/ayanavita-fontend-final/src/components/booking/ToastStack.tsx
+++ b/Home/ayanavita-fontend-final/src/components/booking/ToastStack.tsx
@@ -1,35 +1,33 @@
 // src/components/booking/ToastStack.tsx
 import React from "react";
 import type { ToastItem } from "../../services/useToast";

 export function ToastStack({
   items,
   onClose,
 }: {
   items: ToastItem[];
   onClose: (id: string) => void;
 }) {
+  const current = items[0];
+  if (!current) return null;
+
   return (
-    <div className="fixed bottom-4 right-4 z-[90] grid w-[min(420px,calc(100vw-32px))] gap-2">
-      {items.map((t) => (
-        <div
-          key={t.id}
-          className="flex gap-3 rounded-2xl border border-white/10 bg-slate-900 p-3 text-white shadow-2xl"
-        >
-          <div className="mt-0.5 text-emerald-400">●</div>
-          <div className="min-w-0">
-            <div className="font-extrabold">{t.title}</div>
-            {t.desc ? <div className="mt-0.5 text-sm text-white/80">{t.desc}</div> : null}
-          </div>
-          <button
-            className="ml-auto opacity-80 hover:opacity-100"
-            aria-label="close"
-            onClick={() => onClose(t.id)}
-          >
-            ✕
-          </button>
+    <div className="pointer-events-none fixed inset-0 z-[90] flex items-center justify-center p-4">
+      <div className="pointer-events-auto w-full max-w-md rounded-3xl border border-slate-100 bg-white p-6 text-center shadow-2xl">
+        <div className="mx-auto flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-r from-emerald-100 to-green-100">
+          <span className="text-2xl text-emerald-600">✓</span>
         </div>
-      ))}
+        <div className="mt-3 font-extrabold text-slate-900">{current.title}</div>
+        {current.desc ? <div className="mt-1 text-sm text-slate-600">{current.desc}</div> : null}
+        <button
+          className="mt-5 rounded-2xl bg-gradient-to-br from-indigo-600 to-violet-600 px-5 py-2 text-sm font-extrabold text-white hover:opacity-95"
+          aria-label="close"
+          onClick={() => onClose(current.id)}
+        >
+          Đóng
+        </button>
+      </div>
     </div>
   );
 }
diff --git a/Home/ayanavita-fontend-final/src/pages/BookingPage.tsx b/Home/ayanavita-fontend-final/src/pages/BookingPage.tsx
index 80fde5a2cb5b6cc20b21a08a927acb05d64deb69..ff0438ada3481fa0ca7190e764887789a8f906c1 100644
--- a/Home/ayanavita-fontend-final/src/pages/BookingPage.tsx
+++ b/Home/ayanavita-fontend-final/src/pages/BookingPage.tsx
@@ -3,50 +3,51 @@ import React from "react";
 import { useSearchParams } from "react-router-dom";
 import { BookingHeader } from "../components/booking/BookingHeader";
 import { BookingHero } from "../components/booking/BookingHero";
 import { BookingForm } from "../components/booking/BookingForm";
 import { SlotPicker } from "../components/booking/SlotPicker";
 import { TrustSection } from "../components/booking/TrustSection";
 import { AuthModal } from "../components/booking/AuthModal";
 import { PolicyModal } from "../components/booking/PolicyModal";
 import { ToastStack } from "../components/booking/ToastStack";

 import { bookingApi } from "../api/booking.api";
 import { http } from "../api/http";
 import { useToast } from "../services/useToast";
 import { useBookingSlots } from "../services/useBookingSlots";
 import { getAuth, setAuth, type AuthUser } from "../services/auth.storage";
 import { Footer } from "../components/layout/Footer";

 type Opt = { id: string; name: string; duration?: number; price?: number; address?: string };

 export default function BookingPage() {
   const [searchParams] = useSearchParams();
   const preselectedService = searchParams.get("serviceId") || "";

   const { items: toasts, push: toast, remove } = useToast();
   const slots = useBookingSlots();
+  const { clearPick } = slots;

   const [services, setServices] = React.useState<Opt[]>([]);
   const [branches, setBranches] = React.useState<Opt[]>([]);
   const [loadingCatalog, setLoadingCatalog] = React.useState(true);

   const [serviceId, setServiceId] = React.useState<string>("");
   const [branchId, setBranchId] = React.useState<string>("");
   const [date, setDate] = React.useState<string>(new Date(Date.now() + 86400000).toISOString().slice(0, 10));
   const [customTime, setCustomTime] = React.useState("");

   const [authOpen, setAuthOpen] = React.useState(false);
   const [policyOpen, setPolicyOpen] = React.useState(false);
   const [user, setUser] = React.useState<AuthUser | null>(() => {
     try {
       return getAuth();
     } catch {
       return null;
     }
   });

   const [resetSignal, setResetSignal] = React.useState(0);
   const formRef = React.useRef<HTMLDivElement | null>(null);
   const userLabel = user ? user.name : "Đăng nhập";

   const refreshSlots = React.useCallback(async (sid: string, bid: string, d: string) => {
@@ -75,174 +76,174 @@ export default function BookingPage() {
       setServices(normalizedServices);

       const preferred = normalizedServices.find((s) => s.id === preselectedService)?.id;
       const nextService = preferred || normalizedServices[0]?.id || "";
       setServiceId(nextService);

       const branchRows = nextService ? await bookingApi.branches({ serviceId: Number(nextService) }) : [];
       const normalizedBranches = normalizeBranches(branchRows);
       setBranches(normalizedBranches);

       const nextBranch = normalizedBranches[0]?.id || "";
       setBranchId(nextBranch);

       await refreshSlots(nextService, nextBranch, date);
     } catch {
       toast("Không tải được dữ liệu", "Vui lòng kiểm tra backend (localhost:8090).");
     } finally {
       setLoadingCatalog(false);
     }
   }, [date, normalizeBranches, normalizeServices, preselectedService, refreshSlots, toast]);

   React.useEffect(() => {
     bootstrapCatalog();
   }, [bootstrapCatalog]);

-  const onBranchChange = async (nextBranch: string) => {
+  const onBranchChange = React.useCallback(async (nextBranch: string) => {
     setBranchId(nextBranch);
     setCustomTime("");
-    slots.clearPick();
+    clearPick();
     await refreshSlots(serviceId, nextBranch, date);
-  };
+  }, [clearPick, date, refreshSlots, serviceId]);

-  const onServiceChange = async (nextService: string) => {
+  const onServiceChange = React.useCallback(async (nextService: string) => {
     setServiceId(nextService);
     setCustomTime("");
-    slots.clearPick();
+    clearPick();
     try {
       const branchRows = await bookingApi.branches(nextService ? { serviceId: Number(nextService) } : undefined);
       const normalizedBranches = normalizeBranches(branchRows);
       setBranches(normalizedBranches);
       const nextBranch = normalizedBranches[0]?.id || "";
       setBranchId(nextBranch);
       await refreshSlots(nextService, nextBranch, date);
     } catch {
       toast("Không tải được chi nhánh theo dịch vụ");
     }
-  };
+  }, [clearPick, date, normalizeBranches, refreshSlots, toast]);

-  const onDateChange = async (nextDate: string) => {
+  const onDateChange = React.useCallback(async (nextDate: string) => {
     setDate(nextDate);
     setCustomTime("");
-    slots.clearPick();
+    clearPick();
     await refreshSlots(serviceId, branchId, nextDate);
-  };
+  }, [branchId, clearPick, refreshSlots, serviceId]);

   const onAuthClick = () => {
     if (user) {
       if (confirm("Bạn muốn đăng xuất?")) {
         setAuth(null);
         setUser(null);
         toast("Đã đăng xuất");
       }
       return;
     }
     setAuthOpen(true);
   };

   const fillDemo = () => {
     if (!user) {
       const demoUser: AuthUser = { email: "demo@ayanavita.vn", name: "Khách Demo", remember: false };
       setUser(demoUser);
     }
     toast("Đã điền demo", "Hãy chọn khung giờ và tạo lịch hẹn.");
   };

   const scrollToForm = () => {
     formRef.current?.scrollIntoView({ behavior: "smooth", block: "start" });
   };

   const resetAll = async () => {
     setResetSignal((x) => x + 1);
     setCustomTime("");
-    slots.clearPick();
+    clearPick();
     await bootstrapCatalog();
     toast("Đã reset", "Bạn có thể đặt lịch lại.");
   };

   return (
     <div className="min-h-screen bg-slate-50 text-slate-900">
       <BookingHeader userLabel={userLabel} onHotline={() => toast("Hotline", "Gọi 0900 000 000 (demo)." )} onAuthClick={onAuthClick} />

       <main className="mx-auto max-w-7xl px-4 py-6">
         <BookingHero onFillDemo={fillDemo} onScrollForm={scrollToForm} />

         <section id="form" className="mt-5 grid gap-4 lg:grid-cols-3" ref={formRef}>
           <div className="lg:col-span-2 space-y-4">
             <BookingForm
               services={services as any}
               branches={branches as any}
               selectedServiceId={serviceId}
               selectedBranchId={branchId}
-              selectedSlot={slots.selectedSlot}
-              customTime={customTime}
-              onCustomTime={(v) => {
-                setCustomTime(v);
-                if (v) slots.clearPick();
-              }}
+              selectedSlot={customTime || slots.selectedSlot}
               onToast={toast}
               onCreate={async (b) => {
                 try {
                   await http.post("/booking/appointments", {
                     customerName: b.name,
                     customerPhone: b.phone,
                     customerEmail: b.email || undefined,
                     appointmentAt: `${b.date}T${b.time}:00`,
                     note: b.note || undefined,
                     branchId: Number(b.branchId),
                     serviceId: Number(b.serviceId),
                   });
                   toast("Tạo lịch hẹn thành công", `${b.date} ${b.time}`);
                   await refreshSlots(serviceId, branchId, date);
                 } catch (error: any) {
                   toast("Không thể tạo lịch", error?.response?.data?.message || "Khung giờ có thể đã hết chỗ.");
                 }
               }}
               onResetSignal={resetSignal}
               initialName={user?.name || ""}
               onServiceChange={onServiceChange}
               onBranchChange={onBranchChange}
               onDateChange={onDateChange}
             />
             {loadingCatalog && <div className="text-sm text-slate-500">Đang tải dữ liệu dịch vụ từ API...</div>}

             <div className="rounded-3xl border border-slate-200 bg-slate-50 p-4 ring-1 ring-slate-200">
               <div className="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
                 <div className="text-sm text-slate-700">
                   Khung giờ đã chọn: <b>{customTime || slots.selectedSlot || "Chưa chọn"}</b>
                   <span className="text-slate-500"> • </span>
                   <button className="font-extrabold text-indigo-600 hover:underline" onClick={resetAll} type="button">
                     Reset toàn bộ
                   </button>
                 </div>
               </div>
               <div className="mt-2 text-sm text-slate-600">Slot được backend tính theo số chuyên viên phục vụ được dịch vụ ở chi nhánh đã chọn.</div>
             </div>
           </div>

           <div className="space-y-4">
             <SlotPicker
               slots={slots.slots}
               selected={slots.selectedSlot}
+              customTime={customTime}
               loading={slots.loading}
               durationMin={slots.durationMin}
               capacity={slots.capacity}
               onPick={(t) => {
                 setCustomTime("");
                 slots.pick(t);
               }}
+              onCustomTime={(v) => {
+                setCustomTime(v);
+                if (v) clearPick();
+              }}
               onRefresh={() => refreshSlots(serviceId, branchId, date)}
             />
           </div>
         </section>

         <TrustSection onPolicy={() => setPolicyOpen(true)} />
       </main>

       <Footer />

       <AuthModal open={authOpen} onClose={() => setAuthOpen(false)} toast={toast} onAuthed={(u) => setUser(u)} />
       <PolicyModal open={policyOpen} onClose={() => setPolicyOpen(false)} />
       <ToastStack items={toasts} onClose={remove} />
     </div>
   );
 }
diff --git a/Home/ayanavita-fontend-final/src/services/useToast.ts b/Home/ayanavita-fontend-final/src/services/useToast.ts
index 922a41f5d2f4237abc998b007dd5b95f04d44851..6aaa467d80932af890f2d2ecb08e53634ce94e1e 100644
--- a/Home/ayanavita-fontend-final/src/services/useToast.ts
+++ b/Home/ayanavita-fontend-final/src/services/useToast.ts
@@ -1,26 +1,26 @@
 // src/services/useToast.ts
 import { useCallback, useState } from "react";

 export type ToastItem = {
   id: string;
   title: string;
   desc?: string;
 };

 export function useToast() {
   const [items, setItems] = useState<ToastItem[]>([]);

   const push = useCallback((title: string, desc = "") => {
     const id = Math.random().toString(16).slice(2);
-    setItems((prev) => [{ id, title, desc }, ...prev]);
+    setItems([{ id, title, desc }]);
     window.setTimeout(() => {
       setItems((prev) => prev.filter((x) => x.id !== id));
     }, 4200);
   }, []);

   const remove = useCallback((id: string) => {
     setItems((prev) => prev.filter((x) => x.id !== id));
   }, []);

   return { items, push, remove };
 }
